{"ast":null,"code":"import React,{useState}from'react';import{motion}from'framer-motion';import{Eye,EyeOff,Mail,Lock,User,UserPlus,LogIn,ArrowLeft,Check}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Register=_ref=>{let{onSwitchToLogin,onBack}=_ref;const[formData,setFormData]=useState({email:'',password:'',confirmPassword:'',first_name:'',last_name:''});const[showPassword,setShowPassword]=useState(false);const[showConfirmPassword,setShowConfirmPassword]=useState(false);const[loading,setLoading]=useState(false);const[errors,setErrors]=useState({});const[success,setSuccess]=useState(false);const{register}=useAuth();const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>({...prev,[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.first_name.trim()){newErrors.first_name='First name is required';}if(!formData.email){newErrors.email='Email is required';}else if(!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email='Email is invalid';}if(!formData.password){newErrors.password='Password is required';}else if(formData.password.length<8){newErrors.password='Password must be at least 8 characters';}else if(!/(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(formData.password)){newErrors.password='Password must contain at least one uppercase letter, one lowercase letter, and one number';}if(!formData.confirmPassword){newErrors.confirmPassword='Please confirm your password';}else if(formData.password!==formData.confirmPassword){newErrors.confirmPassword='Passwords do not match';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);const{confirmPassword,...registrationData}=formData;const result=await register(registrationData);setLoading(false);if(result.success){setSuccess(true);}else{setErrors({general:result.error});}};if(success){return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},className:\"w-full max-w-md mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card rounded-2xl p-8 shadow-2xl text-center\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:0.2},className:\"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Check,{className:\"w-8 h-8 text-white\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-4\",children:\"Registration Successful!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-6\",children:\"Please check your email to verify your account before signing in.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onSwitchToLogin,className:\"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-3 px-4 rounded-lg font-medium hover:from-primary-600 hover:to-secondary-600 transition-all flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(LogIn,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Go to Sign In\"})]})]})});}return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"w-full max-w-md mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card rounded-2xl p-8 shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:0.2},className:\"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(UserPlus,{className:\"w-8 h-8 text-white\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-2\",children:\"Create Account\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Join us to start your health journey\"})]}),errors.general&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mb-6\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 dark:text-red-400 text-sm\",children:errors.general})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"First Name\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(User,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"first_name\",value:formData.first_name,onChange:handleChange,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm ${errors.first_name?'border-red-300 dark:border-red-600':'border-gray-300 dark:border-gray-600'}`,placeholder:\"First name\",disabled:loading})]}),errors.first_name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600 dark:text-red-400\",children:errors.first_name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"last_name\",value:formData.last_name,onChange:handleChange,className:\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm\",placeholder:\"Last name (optional)\",disabled:loading})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Email Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Mail,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm ${errors.email?'border-red-300 dark:border-red-600':'border-gray-300 dark:border-gray-600'}`,placeholder:\"Enter your email\",disabled:loading})]}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600 dark:text-red-400\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Lock,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',name:\"password\",value:formData.password,onChange:handleChange,className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm ${errors.password?'border-red-300 dark:border-red-600':'border-gray-300 dark:border-gray-600'}`,placeholder:\"Create a password\",disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPassword(!showPassword),className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",disabled:loading,children:showPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"h-5 w-5 text-gray-400 hover:text-gray-600\"}):/*#__PURE__*/_jsx(Eye,{className:\"h-5 w-5 text-gray-400 hover:text-gray-600\"})})]}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600 dark:text-red-400\",children:errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Confirm Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Lock,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:showConfirmPassword?'text':'password',name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange,className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm ${errors.confirmPassword?'border-red-300 dark:border-red-600':'border-gray-300 dark:border-gray-600'}`,placeholder:\"Confirm your password\",disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowConfirmPassword(!showConfirmPassword),className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",disabled:loading,children:showConfirmPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"h-5 w-5 text-gray-400 hover:text-gray-600\"}):/*#__PURE__*/_jsx(Eye,{className:\"h-5 w-5 text-gray-400 hover:text-gray-600\"})})]}),errors.confirmPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600 dark:text-red-400\",children:errors.confirmPassword})]}),/*#__PURE__*/_jsx(motion.button,{type:\"submit\",disabled:loading,whileHover:{scale:1.02},whileTap:{scale:0.98},className:\"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-3 px-4 rounded-lg font-medium hover:from-primary-600 hover:to-secondary-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center space-x-2\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Create Account\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 text-center space-y-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onSwitchToLogin,className:\"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors flex items-center justify-center space-x-2 mx-auto\",children:[/*#__PURE__*/_jsx(LogIn,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Already have an account? Sign in\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onBack,className:\"text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors flex items-center justify-center space-x-2 mx-auto\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Back to App\"})]})]})]})});};export default Register;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}